---
title: æ’ä»¶ç›®å½•ç»“æ„
icon: folder-tree
order: 3
tag:
  - å¼€å‘
  - æ’ä»¶
  - æ–‡ä»¶
  - ç»“æ„
  - æŒ‡å—
---

æœ¬ç« ä»‹ç»å¸¸è§çš„ JS ä¸ TS æ’ä»¶åŒ…ç›®å½•ç»“æ„åŠä½œç”¨ï¼Œä¾¿äºå¼€å‘è€…å¿«é€Ÿç†è§£å’Œç»´æŠ¤æ’ä»¶ã€‚

:::tip æœ¬ç« æœ¯è¯­

- ğŸ“ ç›®å½• = æ–‡ä»¶å¤¹
- ğŸ—‚ï¸ å­ç›®å½• = ç›®å½•ä¸­çš„å­æ–‡ä»¶å¤¹

:::

## JS æ’ä»¶åŒ…ç»“æ„

ä»¥è¾ƒä¸ºå¸¸è§çš„ [yenai-plugin](https://github.com/yeyang52/yenai-plugin) ä¸ºä¾‹ï¼Œæ’ä»¶åŸºæœ¬ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

![plugin-files](/assets/image/yenai/tree.png)

æ’ä»¶ç”±å¤šä¸ªç›®å½•ä¸æ–‡ä»¶ç»„æˆï¼Œæ¯ä¸ªç›®å½•æˆ–æ–‡ä»¶éƒ½æœ‰æ˜ç¡®çš„èŒè´£ã€‚  

---

### .github

**ç”¨é€”ï¼šGitHub ä¸“ç”¨ç›®å½•**  

å­˜æ”¾å†…å®¹ï¼š

- GitHub Actionsï¼ˆCI/CDï¼‰
- issue / PR æ¨¡æ¿
- è‡ªåŠ¨åŒ–è„šæœ¬  

> ä¸æ’ä»¶è¿è¡Œæ— å…³ï¼Œä»…ç”¨äºé¡¹ç›®ç®¡ç†å’Œè‡ªåŠ¨åŒ–ã€‚

---

### apps <Badge text="é‡ç‚¹" type="important" vertical="middle" />

**åŠŸèƒ½å…¥å£**  

- é€šå¸¸åŒ…å«å¤šä¸ª JS æ–‡ä»¶æˆ–å­ç›®å½•ï¼Œæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½æ¨¡å—ï¼ˆåŠŸèƒ½å•å…ƒï¼‰ã€‚
- æ¯ä¸ªæ–‡ä»¶éœ€å¯¼å‡º `class`ï¼Œä¾› Yunzai æ³¨å†Œä½¿ç”¨ã€‚
- ç”± Yunzai åœ¨åŠ è½½æ’ä»¶æ—¶ç»Ÿä¸€æ³¨å†ŒåŠŸèƒ½ã€‚

![apps-files](/assets/image/yenai/apps.png)

---

### components

**å¯å¤ç”¨ç»„ä»¶é›†åˆ**  

- å­˜æ”¾é…ç½®ç»„ä»¶ã€é€šç”¨å·¥å…·ç±»ã€å‡½æ•°é›†åˆç­‰ï¼Œå¯è¢« `apps` æˆ–å…¶ä»–æ¨¡å—å¤ç”¨ã€‚  

![components-files](/assets/image/yenai/components.png)

---

### config

**é…ç½®æ–‡ä»¶ç›®å½•**  

é€šå¸¸åŒ…å«ä¸¤ä¸ªå­ç›®å½•ï¼š

- `default_config`ï¼šæ’ä»¶é»˜è®¤é…ç½®ï¼Œç”±å¼€å‘è€…ç»´æŠ¤ï¼Œç”¨æˆ·ä¸åº”ä¿®æ”¹ã€‚
- `config`ï¼šç”¨æˆ·å¯ä¿®æ”¹çš„é…ç½®ï¼Œæ’ä»¶è¿è¡Œæ—¶ä¼˜å…ˆè¯»å–ã€‚

> åˆ†ç¦»é»˜è®¤é…ç½®ä¸ç”¨æˆ·é…ç½®å¯ä»¥ç¡®ä¿æ’ä»¶å‡çº§å®‰å…¨ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚

![config-files](/assets/image/yenai/config.png)

---

### constants

**å¸¸é‡å®šä¹‰ç›®å½•**  

- å­˜æ”¾ä¸ä¼šæˆ–ä¸åº”åœ¨è¿è¡Œæ—¶ä¿®æ”¹çš„å€¼ï¼Œå¦‚å­—ç¬¦ä¸²å¸¸é‡ã€æ•°ç»„å¸¸é‡ç­‰ã€‚  

![constants-files](/assets/image/yenai/constants.png)

---

### guoba <Badge text="æ‹“å±•" type="info" vertical="middle" />

**é”…å·´æ’ä»¶ä¸“ç”¨ç›®å½•**  

- ç”¨äºæ”¯æŒ [guoba-plugin](https://github.com/guoba-yunzai/guoba-plugin)ï¼Œæä¾› Web é…ç½®å’Œä¿¡æ¯å±•ç¤ºã€‚
- æ‹†åˆ† `guoba.support.js` è¿›è¡Œæ¨¡å—åŒ–ï¼Œæ–¹ä¾¿ç»´æŠ¤ã€‚  

![guoba-files](/assets/image/yenai/guoba.png)

---

### lib

**åº•å±‚å…¬å…±åº“**  

- æ”¾ç½®ä¸å…·ä½“ä¸šåŠ¡é€»è¾‘æ— å…³çš„å·¥å…·å‡½æ•°æˆ–æ ¸å¿ƒé€»è¾‘ã€‚
- ä¸ `components` ç›¸æ¯”æ›´åâ€œåº•å±‚â€ã€‚

![lib-files](/assets/image/yenai/lib.png)

---

### model / modules

- `model / models`ï¼šæ•°æ®æ¨¡å‹æˆ–å®ä½“å®šä¹‰ï¼Œæè¿°æ•°æ®å­—æ®µã€ç±»å‹ã€é»˜è®¤å€¼åŠå…³è”å…³ç³»ã€‚
- `modules`ï¼šåŠŸèƒ½æ¨¡å—æˆ–ä¸šåŠ¡å•å…ƒï¼Œå®ç°å…·ä½“ä¸šåŠ¡é€»è¾‘ï¼Œå¯å¤ç”¨ `model`ã€`lib`ã€`components` ä¸­çš„èƒ½åŠ›ã€‚

> yenai-plugin å°†ä¸šåŠ¡é€»è¾‘æ”¾åœ¨æ­¤å¤„ï¼Œå¯¹åº” `modules`ã€‚

![model-files](/assets/image/yenai/model.png)

---

### node_modules <Badge text="è‡ªåŠ¨ç”Ÿæˆ" type="note" vertical="middle" />

- ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ç›®å½•ï¼Œç”± npm / pnpm / yarn è‡ªåŠ¨ç”Ÿæˆã€‚
- ä¸åº”æäº¤åˆ°ç‰ˆæœ¬åº“ï¼Œä¸€èˆ¬åŠ å…¥ `.gitignore`ã€‚

---

### resources

**é™æ€èµ„æºç›®å½•**  

- å­˜æ”¾å›¾ç‰‡ã€æ¨¡æ¿ã€å­—ä½“ã€ç¤ºä¾‹æ•°æ®ç­‰éä»£ç èµ„æºï¼Œè¿è¡Œæ—¶æˆ–æ‰“åŒ…æ—¶ä½¿ç”¨ã€‚

---

### tool / utils

- `tool`ï¼šæ„å»º/å¼€å‘/ç»´æŠ¤å·¥å…·ï¼Œå¦‚æ‰“åŒ…ã€è¿ç§»ã€ä»£ç ç”Ÿæˆè„šæœ¬ã€‚
- `utils`ï¼šé€šç”¨å·¥å…·å‡½æ•°é›†åˆï¼Œå¦‚æ—¶é—´å¤„ç†ã€æ ¼å¼åŒ–ã€æ ¡éªŒã€æ—¥å¿—å°è£…ç­‰ã€‚

> åœ¨ yenai-plugin ä¸­ï¼Œ`tool` å†…å®¹å®é™…ä¸Šå±äº `utils`ã€‚

---

### å¸¸è§æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶å                | è¯´æ˜                                   |
| --------------------- | -------------------------------------- |
| `.all-contributorsrc` | è´¡çŒ®è€…é…ç½®æ–‡ä»¶ï¼Œç”¨äºè‡ªåŠ¨ç”Ÿæˆè´¡çŒ®è€…åˆ—è¡¨ |
| `.eslintrc.cjs`       | ESLint é…ç½®ï¼Œè§„èŒƒä»£ç é£æ ¼ä¸è¯­æ³•æ£€æŸ¥    |
| `.gitignore`          | Git å¿½ç•¥è§„åˆ™ï¼Œä¸æäº¤åˆ°ä»“åº“             |
| `CHANGELOG.md`        | æ›´æ–°æ—¥å¿—ï¼Œè®°å½•ç‰ˆæœ¬å˜æ›´                 |
| `guoba.support.js`    | é”…å·´æ’ä»¶æ”¯æŒï¼Œæä¾› Web é…ç½®            |
| `index.js`            | æ’ä»¶å…¥å£ï¼Œå°† `apps` å¯¼å‡ºç»™ Yunzai æ³¨å†Œ |
| `LICENSE`             | å¼€æºåè®®ï¼Œå¦‚ MIT / GPL / BSD           |
| `package.json`        | é¡¹ç›®ä¿¡æ¯ä¸ä¾èµ–ï¼Œ[ğŸ‘‰ npm å®˜æ–¹æ–‡æ¡£è¯´æ˜](https://nodejs.cn/npm/cli/v8/configuring-npm/package-json/)                         |
| `README.md`           | é¡¹ç›®è¯´æ˜æ–‡æ¡£                           |

---

## TS æ’ä»¶ç»“æ„

TS æ’ä»¶ç»“æ„ä¸ JS æ’ä»¶ç±»ä¼¼ï¼Œä¸»è¦å·®åˆ«æ˜¯æºç ä½äº `src`ï¼ŒJS æ–‡ä»¶ç”± TS ç¼–è¯‘è¾“å‡ºåˆ° `lib`ã€‚

![ts-plugin-tree](/assets/image/ts-plugin-tree.png)

### src

**æºç ç›®å½•**  

- å­˜æ”¾ TS æºç ï¼Œå¼€å‘è€…åœ¨æ­¤ç¼–å†™ä»£ç ã€‚

---

### lib

**è¾“å‡ºç›®å½•**  

- TS ç¼–è¯‘åç”Ÿæˆçš„ JS æ–‡ä»¶ï¼ŒYunzai å®é™…è¯»å–çš„æ’ä»¶å†…å®¹ã€‚
- `lib` ä¿æŒä¸ `src` ç›¸åŒç›®å½•ç»“æ„ã€‚

---

### index.js

**Yunzai å…¥å£å…¼å®¹æ–‡ä»¶**  

- æŒ‡å‘ `lib/index.js`ï¼Œç”¨äºå…¼å®¹ Yunzai åŠ è½½ã€‚

---

### src/types

**ç±»å‹å®šä¹‰ç›®å½•**  

- å­˜æ”¾ TS ç±»å‹å£°æ˜ï¼ˆ`interface`ã€`type`ã€`enum`ã€å…¨å±€ç±»å‹æ‰©å±•ï¼‰ã€‚
- ç”¨äºçº¦æŸæ•°æ®ç»“æ„ä¸æ¨¡å—æ¥å£ï¼Œæ— è¿è¡Œæ—¶é€»è¾‘ã€‚

---

### src/dir.ts

**è·¯å¾„å¸¸é‡**  

- è·å–æ’ä»¶ç»å¯¹è·¯å¾„ï¼Œä¾›æ¨¡å—å¼•ç”¨ã€‚

---

### src/index.ts

**å…¥å£æ–‡ä»¶**  

- é›†ä¸­å¯¼å‡º `apps`ï¼Œä¾›æ’ä»¶æ³¨å†Œã€‚
